import{S as D,i as I,s as V,e as N,b as y,K as S,h as p,L as P,k as g,a as L,q as w,l as R,m as b,c as O,r as E,n as k,F as h,N as C}from"./index.9d1d7ce4.js";import{_ as j}from"./preload-helper.41c905a7.js";import{w as A}from"./index.9bd1d5f2.js";function q(l={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:o,onRegistered:i,onRegisteredSW:s,onRegisterError:c}=l;let r,u,_;const v=async(d=!0)=>{await u,await(_==null?void 0:_())};async function a(){if("serviceWorker"in navigator){const{Workbox:d}=await j(()=>import("./workbox-window.prod.es5.dc90f814.js"),[],import.meta.url);r=new d("./sw.js",{scope:"/",type:"classic"}),_=async()=>{await(r==null?void 0:r.messageSkipWaiting())};{let n=!1;const f=()=>{n=!0,r==null||r.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),t==null||t()};r.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?f():!n&&(o==null||o()):m.isExternal?window.location.reload():!n&&(o==null||o()):m.isUpdate||o==null||o()}),r.addEventListener("waiting",f),r.addEventListener("externalwaiting",f)}r.register({immediate:e}).then(n=>{s?s("./sw.js",n):i==null||i(n)}).catch(n=>{c==null||c(n)})}}return u=a(),v}function B(l={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:o,onRegistered:i,onRegisteredSW:s,onRegisterError:c}=l,r=A(!1),u=A(!1),_=q({immediate:e,onOfflineReady(){u.set(!0),o==null||o()},onNeedRefresh(){r.set(!0),t==null||t()},onRegistered:i,onRegisteredSW:s,onRegisterError:c});return{needRefresh:r,offlineReady:u,updateServiceWorker:_}}function T(l){let e,t,o,i,s,c,r,u;function _(n,f){return n[1]?K:F}let v=_(l),a=v(l),d=l[0]&&U(l);return{c(){e=g("div"),t=g("div"),a.c(),o=L(),d&&d.c(),i=L(),s=g("button"),c=w("Close"),this.h()},l(n){e=R(n,"DIV",{class:!0,role:!0});var f=b(e);t=R(f,"DIV",{class:!0});var m=b(t);a.l(m),m.forEach(p),o=O(f),d&&d.l(f),i=O(f),s=R(f,"BUTTON",{class:!0});var W=b(s);c=E(W,"Close"),W.forEach(p),f.forEach(p),this.h()},h(){k(t,"class","message svelte-141ior1"),k(s,"class","svelte-141ior1"),k(e,"class","pwa-toast svelte-141ior1"),k(e,"role","alert")},m(n,f){y(n,e,f),h(e,t),a.m(t,null),h(e,o),d&&d.m(e,null),h(e,i),h(e,s),h(s,c),r||(u=C(s,"click",l[6]),r=!0)},p(n,f){v!==(v=_(n))&&(a.d(1),a=v(n),a&&(a.c(),a.m(t,null))),n[0]?d?d.p(n,f):(d=U(n),d.c(),d.m(e,i)):d&&(d.d(1),d=null)},d(n){n&&p(e),a.d(),d&&d.d(),r=!1,u()}}}function F(l){let e,t;return{c(){e=g("span"),t=w("New content available, click on reload button to update.")},l(o){e=R(o,"SPAN",{});var i=b(e);t=E(i,"New content available, click on reload button to update."),i.forEach(p)},m(o,i){y(o,e,i),h(e,t)},d(o){o&&p(e)}}}function K(l){let e,t;return{c(){e=g("span"),t=w("App ready to work offline")},l(o){e=R(o,"SPAN",{});var i=b(e);t=E(i,"App ready to work offline"),i.forEach(p)},m(o,i){y(o,e,i),h(e,t)},d(o){o&&p(e)}}}function U(l){let e,t,o,i;return{c(){e=g("button"),t=w("Reload"),this.h()},l(s){e=R(s,"BUTTON",{class:!0});var c=b(e);t=E(c,"Reload"),c.forEach(p),this.h()},h(){k(e,"class","svelte-141ior1")},m(s,c){y(s,e,c),h(e,t),o||(i=C(e,"click",l[7]),o=!0)},p:S,d(s){s&&p(e),o=!1,i()}}}function M(l){let e,t=l[2]&&T(l);return{c(){t&&t.c(),e=N()},l(o){t&&t.l(o),e=N()},m(o,i){t&&t.m(o,i),y(o,e,i)},p(o,[i]){o[2]?t?t.p(o,i):(t=T(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:S,o:S,d(o){t&&t.d(o),o&&p(e)}}}function x(l,e,t){let o,i,s;const{needRefresh:c,updateServiceWorker:r,offlineReady:u}=B({onRegistered(a){console.log(`SW Registered: ${a}`)},onRegisterError(a){console.log("SW registration error",a)}});P(l,c,a=>t(0,i=a)),P(l,u,a=>t(1,s=a));const _=()=>{u.set(!1),c.set(!1)},v=()=>r(!0);return l.$$.update=()=>{l.$$.dirty&3&&t(2,o=s||i)},[i,s,o,c,r,u,_,v]}class J extends D{constructor(e){super(),I(this,e,x,M,V,{})}}export{J as default};
