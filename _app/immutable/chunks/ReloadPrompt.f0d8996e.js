import{S as D,i as I,s as V,e as N,b as y,K as S,h as p,L as P,k as g,a as L,q as w,l as R,m as b,c as O,r as E,n as k,F as h,N as C}from"./index.9d1d7ce4.js";import{_ as j}from"./preload-helper.41c905a7.js";import{w as A}from"./index.9bd1d5f2.js";function q(s={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:o,onRegisteredSW:l,onRegisterError:c}=s;let r,u,_;const v=async(d=!0)=>{await u,await(_==null?void 0:_())};async function a(){if("serviceWorker"in navigator){const{Workbox:d}=await j(()=>import("./workbox-window.prod.es5.dc90f814.js"),[],import.meta.url);r=new d("./sw.js",{scope:"/exercises/",type:"classic"}),_=async()=>{await(r==null?void 0:r.messageSkipWaiting())};{let n=!1;const f=()=>{n=!0,r==null||r.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),t==null||t()};r.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?f():!n&&(i==null||i()):m.isExternal?window.location.reload():!n&&(i==null||i()):m.isUpdate||i==null||i()}),r.addEventListener("waiting",f),r.addEventListener("externalwaiting",f)}r.register({immediate:e}).then(n=>{l?l("./sw.js",n):o==null||o(n)}).catch(n=>{c==null||c(n)})}}return u=a(),v}function B(s={}){const{immediate:e=!0,onNeedRefresh:t,onOfflineReady:i,onRegistered:o,onRegisteredSW:l,onRegisterError:c}=s,r=A(!1),u=A(!1),_=q({immediate:e,onOfflineReady(){u.set(!0),i==null||i()},onNeedRefresh(){r.set(!0),t==null||t()},onRegistered:o,onRegisteredSW:l,onRegisterError:c});return{needRefresh:r,offlineReady:u,updateServiceWorker:_}}function T(s){let e,t,i,o,l,c,r,u;function _(n,f){return n[1]?F:x}let v=_(s),a=v(s),d=s[0]&&U(s);return{c(){e=g("div"),t=g("div"),a.c(),i=L(),d&&d.c(),o=L(),l=g("button"),c=w("Close"),this.h()},l(n){e=R(n,"DIV",{class:!0,role:!0});var f=b(e);t=R(f,"DIV",{class:!0});var m=b(t);a.l(m),m.forEach(p),i=O(f),d&&d.l(f),o=O(f),l=R(f,"BUTTON",{class:!0});var W=b(l);c=E(W,"Close"),W.forEach(p),f.forEach(p),this.h()},h(){k(t,"class","message svelte-141ior1"),k(l,"class","svelte-141ior1"),k(e,"class","pwa-toast svelte-141ior1"),k(e,"role","alert")},m(n,f){y(n,e,f),h(e,t),a.m(t,null),h(e,i),d&&d.m(e,null),h(e,o),h(e,l),h(l,c),r||(u=C(l,"click",s[6]),r=!0)},p(n,f){v!==(v=_(n))&&(a.d(1),a=v(n),a&&(a.c(),a.m(t,null))),n[0]?d?d.p(n,f):(d=U(n),d.c(),d.m(e,o)):d&&(d.d(1),d=null)},d(n){n&&p(e),a.d(),d&&d.d(),r=!1,u()}}}function x(s){let e,t;return{c(){e=g("span"),t=w("New content available, click on reload button to update.")},l(i){e=R(i,"SPAN",{});var o=b(e);t=E(o,"New content available, click on reload button to update."),o.forEach(p)},m(i,o){y(i,e,o),h(e,t)},d(i){i&&p(e)}}}function F(s){let e,t;return{c(){e=g("span"),t=w("App ready to work offline")},l(i){e=R(i,"SPAN",{});var o=b(e);t=E(o,"App ready to work offline"),o.forEach(p)},m(i,o){y(i,e,o),h(e,t)},d(i){i&&p(e)}}}function U(s){let e,t,i,o;return{c(){e=g("button"),t=w("Reload"),this.h()},l(l){e=R(l,"BUTTON",{class:!0});var c=b(e);t=E(c,"Reload"),c.forEach(p),this.h()},h(){k(e,"class","svelte-141ior1")},m(l,c){y(l,e,c),h(e,t),i||(o=C(e,"click",s[7]),i=!0)},p:S,d(l){l&&p(e),i=!1,o()}}}function K(s){let e,t=s[2]&&T(s);return{c(){t&&t.c(),e=N()},l(i){t&&t.l(i),e=N()},m(i,o){t&&t.m(i,o),y(i,e,o)},p(i,[o]){i[2]?t?t.p(i,o):(t=T(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:S,o:S,d(i){t&&t.d(i),i&&p(e)}}}function M(s,e,t){let i,o,l;const{needRefresh:c,updateServiceWorker:r,offlineReady:u}=B({onRegistered(a){console.log(`SW Registered: ${a}`)},onRegisterError(a){console.log("SW registration error",a)}});P(s,c,a=>t(0,o=a)),P(s,u,a=>t(1,l=a));const _=()=>{u.set(!1),c.set(!1)},v=()=>r(!0);return s.$$.update=()=>{s.$$.dirty&3&&t(2,i=l||o)},[o,l,i,c,r,u,_,v]}class J extends D{constructor(e){super(),I(this,e,M,K,V,{})}}export{J as default};
